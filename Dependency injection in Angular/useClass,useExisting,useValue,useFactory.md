
useClass
ЮсКласс позволяет заменить зависимость на другой сервис, не заменяя его создание в конструкторе. Его использование продемострированно на 10 строке. В таком случае будет создан инстанс не LoggeService, а EcperimentalLoggerService.

![[Pasted image 20230502093535.png]]
Кроме того данную опцию можно использовать и в модульном инжекторе, в декораторе Injectable![[Pasted image 20230502093945.png]]

useExists

Фишка useClass заключается в том, что при его использовании создаются два разных инстанса класса, который используется в качестве значения useClass и самого этого класса, если мы хотим добавить его отдельно. Проведем эксперимент.![[Pasted image 20230502094611.png]]
если мы добавим ExperimentalLoggerService как отдельный провайдер, и сравним их, то они не будут равны дрвг другу. Для изменения данного поведения воспользуемся useExisting вместо useClass. Таким образом мы говорим ангулару использовать уже созданный инстанс,а не создавать новый.

useValue

Дання опция позволяет использовать уже готовый объект или другое значение в качестве инжектора. Предположим у нас есть готовый объект, который мы хотим использовать вместо класса LoggerService![[Pasted image 20230502095521.png]]
напрямую заинжектить его не получится, т.к это не класс и не получится создать его инстанс. useClass и useExisting так же не сработают, т.к при их использовании создается экземпляр класс с помощью new, а с литералами это невозвомжно. Решить данную проблему можно с помощью useValue![[Pasted image 20230502095819.png]]
в там случае данный объект будет инжектирован подобно сервисам![[Pasted image 20230502095859.png]]

InjectionToken

ИнжекшнТокен используется в том случае, если мы хотим заинжектить какое то значени, например строку или объект.
![[Pasted image 20230502103459.png]]
создадим токен APP_CONFIG, который будет реализовыва необходимый интерфейс AppConfig. При создании данного токена вторым параметром можно передать конфиг объект, который содержит в себе следующие поля:
providedIn: место - где будет создан экземпляр данного сервиса,
factory: функция, которая будет вызываться при создании экземпляра данного токена,
deps: массив зависимостей, которые необходимы для создания экземпляра данного токена
Для использования данного токена необходимо проинжектировать его при помощи декоратора Inject в конструкторе компонента![[Pasted image 20230502103619.png]]

useFactory

Данная опция позволяет есделать провайд сервисов более гибким и позволить инжектировать тот или иной сервис в зависимости от условий. Рассмотрим пример, в котором мы возвращаем экземпляры двух разных сервисов в зависимости от значения, указанного в APP_CONFIG![[Pasted image 20230502105439.png]]
т.к нам необходимо прокинуть токен APP_CONFIG в аргументы и на его основе определить какой сервис мы должны инжектировать, добавляем его в массив deps, кроме того ExperimentalLoggerService так же имеет зависимость на httpClient, значит его так же неоходимо добавить в данный массив. В useFactory у нас функция, которая возвращает тот или иной экземепляр сервиса в зависимости от конфиг объекта![[Pasted image 20230502105716.png]]
![[Pasted image 20230502105734.png]]
при значении true используется первый сервис
![[Pasted image 20230502105813.png]]
![[Pasted image 20230502105833.png]]
при фолс же инжектируется второй