**Формы в ангуляре.**

Для работы с формами в ангуляре существует 2 подхода: TemplateDriven и ReactiveForms. 

***TamplateDriven*** - данных подход заключается в передаче объекта-состояния формы в контроллер посредством двусторонней связки (ngModel). FormModule автоматически парсит темплейт и, если обнаруживается тег form создается необходимый объект. Но для того, чтобы input и другие части формы были видны в этом объекте к каждому необходимому импуту нужно добавить директиву ngModel и присвоить значение аттрибуту name, для того, чтобы присвоить имя данному параметру в объекте.![[Pasted image 20220608152211.png]]
В таком случае мы можем получить соответсвующий объект в контроллере![[Pasted image 20220608152417.png]]
*!ВАЖНО* если не передать директиву ngModel или аттрибут name, то данного импута не будет в объекте.
*!ВАЖНО если неоходимо получить доступ к какому то конкретному инпуту в теплейте то необходимо присвоить значение темплейт переменной ngModel![[Pasted image 20220613130010.png]]
в таком случае появится возможность использовать этот импут к теплейте. Из самой формы данное значение достать можно только в контроллере*

**Сабмит формы.**

Для сабмита формы в ангуляр есть специальное событие ngSubmit. Оно нужно для того, чтобы при сабмите формы не вызывалось дефолтное действие html элемента.![[Pasted image 20220608153034.png]]
Вешается событие ngSubmit, кроме того создается переменная и ей присвается значение директивы ngForm. После этого можно передать данную форму в необходимый метод и получить/обработать ее в контоллере.![[Pasted image 20220608153527.png]]


**Получение формы в котроллере.**

Кроме того соответсвующий объект состояния формы можно получить при помощи @ViewChild. 
![[Pasted image 20220608154538.png]]
![[Pasted image 20220608154611.png]]
В таком случае получаем такой же объект, как и при использовании сабмита.

**Валидация формы**

Для валидации формы можно добавлять различные директивы к необходимым полям. 
![[Pasted image 20220608161639.png]]
![[Pasted image 20220608161812.png]]
Это не отменяет возможности подтвердить сабмит формы, отднако статус INVALID
Список всех деректив можно увидеть тут https://angular.io/api?type=directive

***Указание дефолтных значений***

Для указания дефолтных значений полей необходимо привязать нужное значение к директиве *ngModel*.![[Pasted image 20220609142215.png]]

***Двусторонняя привязка в формах***

Кроме того можно использовать TWDB(two way data binding) для моментального получения данных в какую либо переменную контроллера.

***Задание значения формы программно***

Для прогаммного задания значения той или иной части формы необходимо сначала получить эту форму через *@ViewChild* и использовать метод *patchValue* объекта *form* 
![[Pasted image 20220609151157.png]]


***REACTIVE FORMS***

Отличие реактивных форм заключается в том, что они управляются не из темплейта, а из контроллера. Рассмотрим пример применения реактивной формы. Для создания инстанса реактивной формы в контроллере проинициализируем переменную класса *FormGroup*. Делать это можно как в объявлении переменных, так и в методе *ngOnInit* . 

**Создание формы и ее контроллеров**

Для создание формы инитиализируем инстанс класса *FormGroup* и передаем в него конфиг-объект с названиями контроллеров класса *FormControl* ![[Pasted image 20220613155159.png]]
в качестве аргументов в *FormControl* можно передавать дефолтное значение импута, синхронные и асинхронные валидаторы.

**Привязка формы из контроллера к темплейту** 

Пока ангулар не знает о связи формы из контроллера и темплейта. Для их связи применяются директивы *FormGroup* и *FormContolName* для тега form и различных инпутов соответсвенно. В качестве значений директив указываем название тех *FormControl*, которые указывали в контроллере![[Pasted image 20220613155708.png]]


**Сабмит формы**

Для сабмита формы, так же как и в темплейтДривен используется директива *ngSubmit*. Но в отличии от первого подхода в контроллер передавать ничего не надо, все сабмитится в переменную класса *FormGroup* ![[Pasted image 20220613161207.png]]
![[Pasted image 20220613161235.png]]

**Валидация инпутов**

Валидаторы можно добавлять вторым аргументом инстанса класса *FormControl* . Для этого обязательно надо импортировать Validators 
![[Pasted image 20220613162545.png]]
![[Pasted image 20220613162712.png]]

**Получение импутов** 
В отличаи от темплейтДрайвен, в реактивных формах получение инпута происходит за счет геттера![[Pasted image 20220613162842.png]]

**Группировка инпутов**
Для группировки контроллеров можно создать отдельную формГруппу для них. Единственным отличием данной формГруппы от основной заключается в том, что в темплейте группа для группировки обозначается директорией *FormGroupName* Тогда как основная - *FormGroup* ![[Pasted image 20220613163741.png]]

![[Pasted image 20220613163812.png]]
Кроме того, если необходимо получить доступ к отдельным контроллерам группы, то путь в геттере необходимо менть, добавляя группу-обертку![[Pasted image 20220613163934.png]]
